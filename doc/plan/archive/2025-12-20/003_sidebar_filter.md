# 003: 侧边栏列表搜索与过滤功能

## 1. 目标
实现仓库管理和同步路线左侧列表的实时搜索功能，提升在多组、多项环境下的查找效率。

## 2. 功能描述
- **仓库管理搜索**: 用户在左侧搜索框输入内容时，列表应即时过滤，仅保留名称（仓库名或分组名）匹配的项目。
- **搜索范围**: 支持搜索仓库名称、本地路径（可选）以及分组名称。
- **树结构保留**: 如果一个仓库匹配搜索，其所属的所有父级分组都应显示且自动展开；如果一个分组名称匹配，则显示该分组及其所有子项（或仅显示匹配的子项，取决于策略）。

## 3. 开发任务分解

### 3.1 仓库管理过滤 (Repositories.vue)
- [x] **实现过滤逻辑**:
  - 定义 `filteredTreeData` 计算属性。
  - 使用递归函数处理 `treeData`。
  - 匹配逻辑：`node.name.toLowerCase().includes(searchQuery.value.toLowerCase())`。
  - **关键点**: 如果子节点匹配，父节点必须保留；如果父节点匹配，通常保留所有子节点或继续过滤。
- [x] **自动展开**: 当进行有效搜索时，应自动展开包含匹配项的文件夹。
- [x] **无结果处理**: 搜索无结果时在侧边栏显示“无匹配结果”。

### 3.2 同步路线过滤 (Routes.vue)
- [x] **同步过滤逻辑**: 在 `Routes.vue` 中实现类似的递归过滤逻辑，处理 `route_tree_data`。
- [x] **路径搜索支持**: 支持对源仓库/目标仓库名称的模糊匹配。

### 3.3 UI 优化
- [x] **搜索框交互**:
  - 添加“清除搜索”按钮（当输入非空时显示图标 `X`）。
  - 适当添加防抖处理（建议 150ms），避免非常频繁的重新计算。
- [x] **国际化**:
  - 确保 placeholder 使用 `$t('common.filter')`。
  - 补全“无匹配结果”等新词条。

## 4. 验收标准
- [x] 在搜索框输入关键词，仓库树能即时更新。
- [x] 匹配到的仓库所在的文件夹会自动显示（即使原本是折叠的）。
- [x] 清空搜索框后，仓库树恢复原始完整状态。
- [x] 同步路线侧边栏具有相同且稳定的搜索行为。

## 5. 执行记录
- **开始时间**: 2025-12-20 14:00:00
- **结束时间**: 2025-12-20 14:21:37
